<!DOCTYPE html>
<html>
<head>
<title>Hello, Canvas World!</title>
<script>
const X_MAX = 640;
const Y_MAX = 480;
const RATIO = 45;
let canvas;
let ctx;
let angle;
let posX;
let posY;
let scale;
let branch;
let x = 0;
let y = 0;

function draw() {
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");
    drawScreen( ctx );
   
    setInterval( fern, 100 );
}

function drawScreen( ctx ) {
    ctx.fillStyle = "rgb( 0, 0, 0 )";
    ctx.fillRect( 0, 0, X_MAX, Y_MAX );
}
 
function fern() {
    let sw;
    let tx = 0;
    let ty = 0;
    let i;
 
    for (i = 0; i < 100; i++) {
        tx = 0;
        ty = 0;
        ctx.strokeStyle = "rgb( 0, 127, 0 )"; 
        ctx.beginPath();
        ctx.moveTo(( x * RATIO) + X_MAX / 2 - 50, Y_MAX - y * RATIO);
        ctx.lineTo(( x * RATIO) + X_MAX / 2 - 50 + 2, Y_MAX - y * RATIO + 2);
        ctx.closePath();
        ctx.stroke();
 
        sw = Math.floor( Math.random() * 100 );
        if (sw > 15) {
            tx = 0.85 * x + 0.04 * y;
            ty = -0.04 * x + 0.85 * y + 1.6;
        } else if (sw > 8) {
            tx = -0.15 * x + 0.28 * y;
            ty = 0.26 * x + 0.24 * y + 0.44;
        } else if (sw > 1) {
            tx = 0.2 * x - 0.26 * y;
            ty = 0.23 * x + 0.22 * y + 1.6;
        } else {
            tx = 0;
            ty = y * 0.16;
        }
 
        x = tx;
        y = ty;
    }
}
</script>
</head>
<body onload="draw()">
<canvas id="canvas" width="640" height="480"></canvas>
<a href="https://github.com/cx20/hello/blob/master/html5/canvas/2-6.fern.html" target="_blank">View Source</a>
</body>
</html>
