<!DOCTYPE html>
<html lang="ja">
 <head>
  <title>CX's CSS World!</title>
 </head>
 <div style="display: flex;">
<div id="panel" style="width: 300px;">
<table border=0>
<tr><td>
■CX's CSS World! [<a href="../">..</a>]<br>
└背景パターン<br>
　└<a href="./1-1.graph.html" target="main">方眼用紙</a><br>
</td>
<td>
</td>
</tr>
</table>
</div>
<div style="display: auto">
 <iframe name="main" style="position: absolute; width: 100%; height: 100%; overflow: auto">
 </iframe>
</div>
</div>
<script>
window.onload = function() {
    let hash = location.hash;
    let url = getUrlfromHash(hash);
    navigateInnerFrame(url);
}

// TODO: https://threejs.org/examples/ のサンプル一覧画面のようなナビゲーションを実現する
// アドレスバーにはサンプルに対応したハッシュ「#～」を表示し、
// 内部フレームにはクリックしたサンプルが表示される。
// また、サンプルURLを新しいウィンドウで開くと、直接サンプルのURLが表示される
window.addEventListener("click", {
    handleEvent: function(e) {
        let hash = e.target.hash;
        let pathname = e.target.pathname.split("/").pop();
        let url = e.target.href;
        // URL にハッシュ部分が設定されていない場合
        if (hash.length == 0) {
            // URL を「#～」に置き換える
            // 例）「1-5.lissajous.html」→「#1-5.lissajous」
            hash = "#" + pathname.replace(".html", "");
            // アドレスバーの URL に「#～」を付与する
            location.href = hash;
        }
        // 内部フレームをクリックされた URL に変更する
        navigateInnerFrame(url);
    }
}, false);

function getUrlfromHash(hash) {
    if (hash.length > 0) {
        return hash.replace("#", "./") + ".html";
    } else {
        return "./1-1.graph.html"; // default
    }
}

function navigateInnerFrame(url) {
    main.location.href = url;
}
</script>
</html>
